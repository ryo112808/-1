<!doctype html>
<html lang="ja" data-theme="auto">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <meta name="theme-color" content="#ffffff" />
  <title>単語plus</title>
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="styles.css?v=6">
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="brand__title">単語plus</div>
      <div class="brand__sub">貼る → 自分の単語帳 → フラッシュで確認</div>
    </div>

    <div class="topbar__right">
      <button class="btn ghost" id="themeBtn" type="button" aria-label="表示モード">🌗</button>
    </div>
  </header>

  <main class="container">
    <nav class="tabs" role="tablist" aria-label="画面">
      <button class="tab is-active" data-tab="list" role="tab" aria-selected="true">リスト</button>
      <button class="tab" data-tab="paste" role="tab" aria-selected="false">貼る</button>
      <button class="tab" data-tab="flash" role="tab" aria-selected="false">フラッシュ</button>
      <button class="tab" data-tab="manage" role="tab" aria-selected="false">管理</button>
    </nav>

    <!-- LIST -->
    <section class="card" id="tab_list">
      <div class="row">
        <input class="input" id="search" placeholder="検索（単語 / 和訳 / 意味 / 類語 / メモ / #タグ）" autocomplete="off" />
        <button class="btn" id="clearSearch" type="button">クリア</button>
      </div>

      <div class="row">
        <select class="select" id="filterLevel">
          <option value="all">暗記度：全部</option>
          <option value="0">暗記度：未習得</option>
          <option value="1">暗記度：あやふや</option>
          <option value="2">暗記度：習得</option>
          <option value="3">暗記度：定着</option>
        </select>
        <select class="select" id="sortBy">
          <option value="new">並び：新しい順</option>
          <option value="old">並び：古い順</option>
          <option value="az">並び：A→Z</option>
        </select>
      </div>

      <div class="hint" id="statusLine"></div>
      <div id="listArea" class="list"></div>
      <div class="footerSpace"></div>
    </section>

    <!-- PASTE -->
    <section class="card" id="tab_paste" hidden>
      <div class="cardTitle">まとめ貼り（コピペでOK）</div>
      <div class="hint">改行 / スペース / 「/」「,」区切りを自動で分解して追加。</div>

      <textarea class="textarea" id="bulk" placeholder="例:
claim
nevertheless
abundant / prominent, speculate"></textarea>

      <div class="row">
        <button class="btn primary" id="addBulk" type="button">追加する</button>
        <button class="btn" id="retryMissing" type="button">未取得を再取得</button>
      </div>

      <div class="meter">
        <div class="meter__row">
          <span class="pill" id="qLabel">待機 0</span>
          <span class="pill" id="pLabel">進行 0</span>
          <span class="pill ok" id="sLabel">成功 0</span>
          <span class="pill ng" id="fLabel">保留 0</span>
        </div>
        <div class="hint" id="queueHint"></div>
      </div>
    </section>

    <!-- FLASH -->
    <section class="card" id="tab_flash" hidden>
      <div class="cardTitle">フラッシュ</div>
      <div class="hint">単語だけ表示 → 「答え」or 評価で和訳を表示。</div>

      <div class="row">
        <select class="select" id="flashLevel">
          <option value="all">出題：全部</option>
          <option value="0">出題：未習得</option>
          <option value="1">出題：あやふや</option>
          <option value="2">出題：習得</option>
          <option value="3">出題：定着</option>
        </select>
        <input class="input" id="flashCount" inputmode="numeric" placeholder="出題数（例: 20）" />
      </div>

      <div class="row">
        <label class="toggle">
          <input type="checkbox" id="flashShuffle" checked>
          <span>シャッフル</span>
        </label>
        <button class="btn primary" id="startFlash" type="button">開始</button>
      </div>

      <div class="hint">途中は「終了」でいつでも戻る。</div>
    </section>

    <!-- MANAGE -->
    <section class="card" id="tab_manage" hidden>
      <div class="cardTitle">管理</div>
      <div class="hint">データは端末（localStorage）に保存。エクスポートでバックアップ。</div>

      <div class="row">
        <button class="btn" id="exportBtn" type="button">エクスポート</button>
        <button class="btn" id="importBtn" type="button">インポート</button>
      </div>

      <div class="dangerBox">
        <div class="dangerBox__title">危険操作</div>
        <div class="hint">削除はゴミ箱へ移動 → 復元OK。完全削除は長押し。</div>
        <div class="row">
          <button class="btn danger" id="trashAll" type="button">全削除（ゴミ箱へ）</button>
          <button class="btn" id="openTrash" type="button">ゴミ箱を見る</button>
        </div>
      </div>
    </section>
  </main>

  <!-- FLASH OVERLAY (独立感) -->
  <div class="overlay" id="flashOverlay" hidden>
    <div class="overlay__top">
      <div class="overlay__progress" id="flashProgress">1 / 20</div>
      <button class="btn" id="endFlash" type="button">終了</button>
    </div>

    <div class="overlay__card">
      <div class="wordBig" id="flashWord">word</div>
      <div class="phonetic" id="flashPhonetic"></div>

      <div class="answerBox" id="answerBox" hidden>
        <div class="answerTitle">和訳</div>
        <div class="answerJa" id="flashJa"></div>
        <div class="answerHint" id="flashHint"></div>
      </div>

      <div class="row">
        <button class="btn primary" id="revealBtn" type="button">答え</button>
        <button class="btn" id="nextBtn" type="button">次へ</button>
      </div>

      <div class="rates" id="rateRow" hidden>
        <button class="btn rate" data-rate="0" type="button">未習得</button>
        <button class="btn rate" data-rate="1" type="button">あやふや</button>
        <button class="btn rate" data-rate="2" type="button">習得</button>
        <button class="btn rate" data-rate="3" type="button">定着</button>
      </div>

      <div class="tiny" id="flashMeta"></div>
    </div>

    <div class="overlay__done" id="flashDone" hidden>
      <div class="doneTitle">おつかれ！</div>
      <div class="doneText" id="doneText"></div>
      <button class="btn primary" id="doneClose" type="button">リストへ戻る</button>
    </div>
  </div>

  <!-- Tutorial (first launch) -->
  <div class="tuto" id="tuto" hidden>
    <div class="tuto__panel">
      <div class="tuto__head">
        <div class="tuto__title">使い方</div>
        <button class="btn ghost" id="tutoSkip" type="button">スキップ</button>
      </div>

      <div class="tuto__slides" id="tutoSlides">
        <section class="tuto__slide is-active">
          <div class="tuto__step">① 貼る</div>
          <div class="tuto__text">単語をまとめて貼って「追加する」。自分だけの単語帳がすぐ作れる。</div>
        </section>
        <section class="tuto__slide">
          <div class="tuto__step">② リスト</div>
          <div class="tuto__text">検索で一発。和訳・意味・類語・メモも一緒に探せる。</div>
        </section>
        <section class="tuto__slide">
          <div class="tuto__step">③ フラッシュ</div>
          <div class="tuto__text">単語だけ表示 →「答え」or 評価で和訳を表示。指定数で終わる。</div>
        </section>
        <section class="tuto__slide">
          <div class="tuto__step">④ バックアップ</div>
          <div class="tuto__text">管理→エクスポートでコピー。入試前はここだけ覚えればOK。</div>
        </section>
      </div>

      <div class="tuto__dots" id="tutoDots" aria-hidden="true"></div>

      <div class="tuto__actions">
        <button class="btn" id="tutoPrev" type="button">戻る</button>
        <button class="btn primary" id="tutoNext" type="button">次へ</button>
      </div>
    </div>
  </div>

  <script src="app.js?v=6" defer></script>
</body>
</html>
